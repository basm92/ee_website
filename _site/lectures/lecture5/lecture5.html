<!DOCTYPE html>
<html lang="en"><head>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-html/tabby.min.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/light-border.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.5.54">

  <title>Empirical Economics</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="../../site_libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="../../site_libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; font-weight: bold; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="../../site_libs/revealjs/dist/theme/quarto.css">
  <link rel="stylesheet" href="styles.css">
  <link href="../../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/reveal-chalkboard/font-awesome/css/all.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/reveal-chalkboard/style.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-titled.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-titled) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-titled.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-titled .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-titled .callout-title  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-titled.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-titled.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-title {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-title {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-title {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-titled .callout-body > .callout-content > :last-child {
    padding-bottom: 0.5rem;
    margin-bottom: 0;
  }

  .callout.callout-titled .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-titled) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-title {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-title {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-title {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-title {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-title {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">Empirical Economics</h1>
  <p class="subtitle">Lecture 5: Panel Data</p>

<div class="quarto-title-authors">
</div>

</section>
<section>
<section id="outline" class="title-slide slide level1 center">
<h1>Outline</h1>

</section>
<section id="course-overview" class="slide level2">
<h2>Course Overview</h2>
<ul>
<li>Statistics and Probability - Basic Concepts</li>
<li>Statistics and Probability - Hypothesis Testing</li>
<li>The Linear Regression Model</li>
<li>Time Series Data</li>
<li>Panel Data (FE) and Control Variables</li>
<li>Binary Outcome Data</li>
<li>Potential Outcomes and Difference-in-differences</li>
<li>Hands-on Econometrics in Practice</li>
</ul>
</section>
<section id="what-do-we-do-today" class="slide level2">
<h2>What do we do today?</h2>
<ul>
<li><p>We have seen <em>cross sectional</em> and <em>time series</em> data</p></li>
<li><p>This lecture, we will talk about methods used when we can <em>combine</em> features of cross-sectional and time-series data</p></li>
<li><p>We will introduce two workhorse econometrics models, the Fixed Effects (FE) model, and the Random Effects (RE) model</p></li>
<li><p>We discuss a special case of panel data in the form of <em>event studies</em>.</p></li>
</ul>
</section></section>
<section>
<section id="introduction" class="title-slide slide level1 center">
<h1>Introduction</h1>

</section>
<section id="what-is-panel-data" class="slide level2">
<h2>What is Panel Data?</h2>
<ul>
<li><p>A panel dataset (or longitudinal dataset) follows the <strong>same</strong> set of individuals over <strong>multiple</strong> time periods.</p></li>
<li><p>Structure:</p>
<ul>
<li><strong><span class="math inline">\(N\)</span></strong>: The number of individuals or entities (e.g., people, firms, countries, schools).</li>
<li><strong><span class="math inline">\(T\)</span></strong>: The number of time periods (e.g., years, quarters, days).</li>
</ul></li>
<li><p>The total number of observations is <span class="math inline">\(N \times T\)</span> (for a balanced panel).</p></li>
</ul>
<div title="Examples: Panel Data">
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Examples: Panel Data</strong></p>
</div>
<div class="callout-content">
<p><strong>PSID (Panel Study of Income Dynamics):</strong> Tracks thousands of families and their descendants over many years.</p>
<p><strong>Compustat:</strong> Financial data for thousands of public firms over many years.</p>
</div>
</div>
</div>
</div>
</section>
<section id="sec-structure" class="slide level2">
<h2>Structure of Panel Data</h2>
<ul>
<li>Imagine tracking the GDP and foreign investment for 3 countries over 4 years.</li>
</ul>
<div style="font-size: 1.5em;">
<table class="caption-top">
<thead>
<tr class="header">
<th style="text-align: center;">Country (i)</th>
<th style="text-align: center;">Year (t)</th>
<th style="text-align: center;">GDP (<span class="math inline">\(y_{it}\)</span>)</th>
<th style="text-align: center;">Investment (<span class="math inline">\(X_{it}\)</span>)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">USA</td>
<td style="text-align: center;">2019</td>
<td style="text-align: center;">21.4</td>
<td style="text-align: center;">0.25</td>
</tr>
<tr class="even">
<td style="text-align: center;">USA</td>
<td style="text-align: center;">2020</td>
<td style="text-align: center;">20.9</td>
<td style="text-align: center;">0.16</td>
</tr>
<tr class="odd">
<td style="text-align: center;">USA</td>
<td style="text-align: center;">2021</td>
<td style="text-align: center;">23.0</td>
<td style="text-align: center;">0.36</td>
</tr>
<tr class="even">
<td style="text-align: center;">USA</td>
<td style="text-align: center;">2022</td>
<td style="text-align: center;">25.4</td>
<td style="text-align: center;">0.13</td>
</tr>
<tr class="odd">
<td style="text-align: center;">Germany</td>
<td style="text-align: center;">2019</td>
<td style="text-align: center;">3.8</td>
<td style="text-align: center;">0.14</td>
</tr>
<tr class="even">
<td style="text-align: center;">Germany</td>
<td style="text-align: center;">2020</td>
<td style="text-align: center;">3.8</td>
<td style="text-align: center;">0.13</td>
</tr>
<tr class="odd">
<td style="text-align: center;">…</td>
<td style="text-align: center;">…</td>
<td style="text-align: center;">…</td>
<td style="text-align: center;">…</td>
</tr>
<tr class="even">
<td style="text-align: center;">Japan</td>
<td style="text-align: center;">…</td>
<td style="text-align: center;">…</td>
<td style="text-align: center;">…</td>
</tr>
</tbody>
</table>
</div>
<ul>
<li>Here, <span class="math inline">\(N=3\)</span> and <span class="math inline">\(T=4\)</span>.</li>
<li>The data has both a <strong>cross-sectional</strong> dimension (comparing USA, Germany, Japan in one year) and a <strong>time-series</strong> dimension (tracking the USA from 2019-2022).</li>
</ul>
</section>
<section id="advantages-of-panel-data" class="slide level2">
<h2>Advantages of Panel Data</h2>
<ul>
<li><strong>Controlling for Unobserved Heterogeneity:</strong>
<ul>
<li>This is the biggest advantage! We can control for factors that are unobserved and constant over time for each individual (e.g., intrinsic ability, corporate culture, national institutions).</li>
<li>This helps us mitigate omitted variable bias.</li>
</ul></li>
<li><strong>Increased Degrees of Freedom:</strong>
<ul>
<li>Panel datasets are often much larger than pure cross-sectional or time-series datasets.</li>
<li>More data leads to more precise estimates (lower standard errors).</li>
</ul></li>
<li><strong>Analyzing Dynamics:</strong>
<ul>
<li>We can study how variables change over time and the speed of adjustment.</li>
<li>For example, how long does it take for a change in policy to affect unemployment? You can’t answer this with a single cross-section.</li>
</ul></li>
</ul>
</section>
<section id="notation-for-panel-data-models" class="slide level2">
<h2>Notation for Panel Data Models</h2>
<ul>
<li>A standard panel data regression model is written as:</li>
</ul>
<div title="Definition: Panel Regression Model">
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Definition: Panel Regression Model</strong></p>
</div>
<div class="callout-content">
<p><span class="math display">\[ y_{it} = \beta_0 + \beta_1 X_{1,it} + ... + \beta_k X_{k,it} + u_{it} \]</span></p>
<p>Where:</p>
<ul>
<li><span class="math inline">\(i = 1, ..., N\)</span> indexes the individual or entity.</li>
<li><span class="math inline">\(t = 1, ..., T\)</span> indexes the time period.</li>
<li><span class="math inline">\(y_{it}\)</span>: The dependent variable for individual <span class="math inline">\(i\)</span> at time <span class="math inline">\(t\)</span>.</li>
<li><span class="math inline">\(X_{k,it}\)</span>: The <span class="math inline">\(k^{th}\)</span> independent variable for individual <span class="math inline">\(i\)</span> at time <span class="math inline">\(t\)</span>.</li>
<li><span class="math inline">\(\beta_k\)</span>: The coefficient for variable <span class="math inline">\(X_k\)</span>.</li>
<li><span class="math inline">\(u_{it}\)</span>: The error term for individual <span class="math inline">\(i\)</span> at time <span class="math inline">\(t\)</span>.</li>
</ul>
</div>
</div>
</div>
</div>
<ul>
<li>The key is what we assume about the error term, <span class="math inline">\(u_{it}\)</span>.</li>
</ul>
</section></section>
<section>
<section id="the-pooled-ols-model" class="title-slide slide level1 center">
<h1>The Pooled OLS Model</h1>

</section>
<section id="the-pooled-ols-model-1" class="slide level2">
<h2>The Pooled OLS Model</h2>
<ul>
<li>The simplest approach is to ignore the panel structure entirely.</li>
</ul>
<div title="Definition: Pooled OLS Model">
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Definition: Pooled OLS Model</strong></p>
</div>
<div class="callout-content">
<p><span class="math display">\[ y_{it} = \beta_0 + \beta_1 X_{it} + u_{it} \]</span></p>
</div>
</div>
</div>
</div>
<ul>
<li><strong>Method:</strong>
<ul>
<li>Stack all <span class="math inline">\(N \times T\)</span> observations together.</li>
<li>Run a single OLS regression as if it were one large cross-section.</li>
</ul></li>
<li><strong>Key Assumption:</strong>
<ul>
<li>The error term <span class="math inline">\(u_{it}\)</span> is uncorrelated with the regressors <span class="math inline">\(X_{it}\)</span>.</li>
<li>This implicitly assumes that there are <strong>no unobserved individual-specific or time-specific effects</strong> that are correlated with our <span class="math inline">\(X\)</span> variables.</li>
<li>This assumption is almost always violated in practice! It ignores the very heterogeneity that panel data is designed to address, leading to biased estimates.</li>
</ul></li>
</ul>
</section>
<section id="unobserved-heterogeneity" class="slide level2">
<h2>Unobserved Heterogeneity</h2>
<ul>
<li><p>The error term <span class="math inline">\(u_{it}\)</span> in a panel model is often thought to have multiple parts:</p>
<p><span class="math display">\[ u_{it} = \alpha_i + \lambda_t + \epsilon_{it} \]</span></p></li>
<li><p><span class="math inline">\(\alpha_i\)</span>: <strong>Individual-specific effect</strong>. This is an unobserved factor that is constant over time for a given individual <span class="math inline">\(i\)</span>, but varies across individuals.</p></li>
<li><p><span class="math inline">\(\lambda_t\)</span>: <strong>Time effect</strong>. This is an unobserved factor that is constant for all individuals at a given time <span class="math inline">\(t\)</span>, but varies over time.</p></li>
<li><p><span class="math inline">\(\epsilon_{it}\)</span>: The idiosyncratic error term that varies across both <span class="math inline">\(i\)</span> and <span class="math inline">\(t\)</span>.</p></li>
<li><p>The core challenge of panel data is how to deal with <span class="math inline">\(\alpha_i\)</span> and <span class="math inline">\(\lambda_t\)</span>.</p></li>
</ul>
</section>
<section id="unobserved-heterogeneity-examples" class="slide level2">
<h2>Unobserved Heterogeneity Examples</h2>
<div title="Example: Unobserved Heterogeneity">
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Example: Unobserved Heterogeneity</strong></p>
</div>
<div class="callout-content">
<p><span class="math inline">\(\alpha_i\)</span>: An individual’s innate ability, a firm’s management quality, a country’s cultural norms. All of these affect a particular individual, firm, or country <span class="math inline">\(i\)</span> in a way that is constant over time.</p>
<p><span class="math inline">\(\lambda_t\)</span>: A global financial crisis, a major policy change, a technological shock. All of these affect an entire cross-section at particular point in time <span class="math inline">\(t\)</span>.</p>
</div>
</div>
</div>
</div>
</section></section>
<section>
<section id="the-fixed-effects-estimator" class="title-slide slide level1 center">
<h1>The Fixed Effects Estimator</h1>

</section>
<section id="fixed-effects" class="slide level2">
<h2>Fixed Effects</h2>
<ul>
<li><strong>Core Idea:</strong> Treat the individual-specific effects, <span class="math inline">\(\alpha_i\)</span>, as <strong>parameters to be estimated</strong>. Each individual gets their own intercept.</li>
</ul>
<div title="Definition: Fixed Effects Model">
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Definition: Fixed Effects Model</strong></p>
</div>
<div class="callout-content">
<p><span class="math display">\[ y_{it} = (\beta_0 + \alpha_i) + \beta_1 X_{it} + \epsilon_{it} \]</span> or more simply: <span class="math display">\[ y_{it} = \alpha_i + \beta_1 X_{it} + \epsilon_{it} \]</span> (Here, the <span class="math inline">\(\alpha_i\)</span> represent the individual-specific intercepts)</p>
</div>
</div>
</div>
</div>
<ul>
<li>The term “fixed effects” implies that we are making no assumptions about the distribution of the <span class="math inline">\(\alpha_i\)</span> or their correlation with <span class="math inline">\(X_{it}\)</span>. We allow them to be correlated with the regressors.</li>
</ul>
</section>
<section id="the-within-estimator-for-fe" class="slide level2">
<h2>The “Within” Estimator for FE</h2>
<ul>
<li>It is easy to estimate a fixed effects model: it is actually OLS estimation on transformed data</li>
<li>This fact allows us to estimate the FE model without explicitly estimating <span class="math inline">\(N\)</span> different intercepts?</li>
<li>The goal is to eliminate the fixed effect <span class="math inline">\(\alpha_i\)</span> in <span class="math inline">\(Y_{it} = \alpha_i + \beta_1 X_{it} + \epsilon_{it}\)</span></li>
</ul>
</section>
<section id="within-transformation" class="slide level2">
<h2>Within Transformation</h2>
<div title="Definition: Within Transformation">
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Definition: Within Transformation</strong></p>
</div>
<div class="callout-content">
<p><strong>Step 1:</strong> For each individual <span class="math inline">\(i\)</span>, calculate the time-average of their variables: <span class="math display">\[ \bar{y}_i = \frac{1}{T} \sum_{t=1}^{T} y_{it} \quad \text{and} \quad \bar{X}_i = \frac{1}{T} \sum_{t=1}^{T} X_{it} \]</span></p>
<p><strong>Step 2:</strong> Subtract the individual-specific average from the original model: <span class="math display">\[ y_{it} - \bar{y}_i = \beta_1 (X_{it} - \bar{X}_i) + (\epsilon_{it} - \bar{\epsilon}_i) \]</span> The fixed effect <span class="math inline">\(\alpha_i\)</span> is time-constant, so <span class="math inline">\(\alpha_i - \bar{\alpha}_i = \alpha_i - \alpha_i = 0\)</span>. It drops out!</p>
<p><strong>Step 3:</strong> Run OLS on the “de-meaned” data: <span class="math display">\[ (y_{it} - \bar{y}_i) \text{ on } (X_{it} - \bar{X}_i) \]</span> This gives a consistent estimate of <span class="math inline">\(\beta_1\)</span>.</p>
</div>
</div>
</div>
</div>
</section>
<section id="least-squares-dummy-variable-model" class="slide level2">
<h2>Least Squares Dummy Variable Model</h2>
<ul>
<li>An alternative, but <strong>equivalent</strong>, way to get FE estimates is the LSDV model.</li>
</ul>
<div title="LSDV Model">
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>LSDV Model</strong></p>
</div>
<div class="callout-content">
<p>Create a dummy (0/1) variable for each individual <span class="math inline">\(i\)</span> (except for one, to avoid the dummy variable trap).</p>
<p>Run a single OLS regression including these <span class="math inline">\(N-1\)</span> dummy variables.</p>
<p><span class="math display">\[ y_{it} = \beta_0 + \beta_1 X_{it} + d_1\alpha_1 + d_2\alpha_2 + ... + d_{N-1}\alpha_{N-1} + \epsilon_{it} \]</span></p>
<p>The estimated coefficient <span class="math inline">\(\beta_1\)</span> from the LSDV model is <strong>identical</strong> to the one from the “Within” estimator.</p>
</div>
</div>
</div>
</div>
<ul>
<li>The coefficients on the dummies (<span class="math inline">\(\alpha_i\)</span>) are the estimated fixed effects.</li>
<li>LSDV is impractical for panels with very large <span class="math inline">\(N\)</span> (e.g., thousands of individuals) due to computational burden. The “Within” estimator is more efficient.</li>
</ul>
</section>
<section id="interpretation-of-fe-coefficients" class="slide level2">
<h2>Interpretation of FE Coefficients</h2>
<div title="Interpretation of Fixed Effects models">
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Interpretation of Fixed Effects models</strong></p>
</div>
<div class="callout-content">
<p>In a Fixed Effects model, the coefficient <span class="math inline">\(\beta_1\)</span> measures:</p>
<p>The average change in <span class="math inline">\(y\)</span> for a one-unit increase in <span class="math inline">\(X\)</span> <strong>within</strong> a given individual over time.</p>
</div>
</div>
</div>
</div>
<ul>
<li>The FE estimator uses only the variation <em>within</em> each individual (firm/country/etc.) to estimate the coefficients.</li>
<li>It effectively ignores variation <em>between</em> individuals. You are comparing individual A at time 1 to individual A at time 2, not to individual B.</li>
</ul>
</section>
<section id="visualization-fixed-effects" class="slide level2">
<h2>Visualization Fixed Effects</h2>

<img data-src="lecture5_files/figure-revealjs/unnamed-chunk-1-1.png" class="quarto-figure quarto-figure-center r-stretch" width="672"></section>
<section id="pros-and-cons-of-the-fixed-effects-model" class="slide level2">
<h2>Pros and Cons of the Fixed Effects Model</h2>
<ul>
<li><strong>Pros:</strong>
<ul>
<li><strong>Controls for all time-invariant omitted variables</strong>, whether observed or unobserved. This is its most powerful feature. If you are worried that unobserved <code>ability</code> is correlated with both <code>education</code> (your X) and <code>wage</code> (your Y), FE solves this problem because <code>ability</code> is constant for an individual.</li>
<li>It is consistent even if the unobserved effect <span class="math inline">\(\alpha_i\)</span> is correlated with the regressors <span class="math inline">\(X_{it}\)</span>.</li>
</ul></li>
<li><strong>Cons:</strong>
<ul>
<li><strong>Cannot estimate the effect of time-invariant variables.</strong> The “Within” transformation wipes them out.</li>
<li>For example, you cannot estimate the effect of <code>gender</code> or <code>race</code> on wages using a standard FE model, because these variables do not change over time for an individual.</li>
<li>May be less efficient than the Random Effects model if its stricter assumptions hold.</li>
</ul></li>
</ul>
</section>
<section id="fixed-effects-in-software" class="slide level2">
<h2>Fixed Effects in Software</h2>
<ul>
<li><p>Arguably, the fixed effects model is one of the most often-used models in modern econometrics.</p></li>
<li><p>Standard statistical software such as <code>lm()</code> in R or <code>sm.OLS()</code> in Python can implement FE using the LSDV method, but this is often tedious.</p></li>
<li><p>The <code>fixest</code> (R) and <code>pyfixest</code> (Python) package provide a very easy way to estimate FE proceding from a dataset that looks like the one on <a href="#/sec-structure" class="quarto-xref">Slide&nbsp;2.2</a>.</p></li>
<li><p>This is how that works in practice:</p></li>
</ul>
<div class="panel-tabset">
<ul id="tabset-1" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-1-1">R</a></li><li><a href="#tabset-1-2">Python</a></li><li><a href="#tabset-1-3">Stata</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1">
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a></a><span class="fu">library</span>(fixest)</span>
<span id="cb1-2"><a></a>model <span class="ot">&lt;-</span> <span class="fu">feols</span>(y <span class="sc">~</span> x1 <span class="sc">+</span> x2 <span class="sc">|</span> fe1 <span class="sc">+</span> fe2, <span class="at">data =</span> dataset) </span>
<span id="cb1-3"><a></a><span class="co"># fixed effects separated from ind. vars. by |</span></span>
<span id="cb1-4"><a></a><span class="fu">summary</span>(model)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-1-2">
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a></a><span class="im">import</span> pyfixest <span class="im">as</span> pf</span>
<span id="cb2-2"><a></a></span>
<span id="cb2-3"><a></a>fit <span class="op">=</span> pf.feols(fml<span class="op">=</span><span class="st">"y ~ x1 + x2 | fe1 + fe2"</span>, data<span class="op">=</span>data)</span>
<span id="cb2-4"><a></a><span class="co"># fixed effects separated from the ind. vars. by | </span></span>
<span id="cb2-5"><a></a>fit.summary()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-1-3">
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource stata number-lines code-with-copy"><code class="sourceCode stata"><span id="cb3-1"><a></a>xtset country <span class="fu">year</span> *\In <span class="kw">order</span>: <span class="ot">$i</span>$ <span class="kw">variable</span>, <span class="ot">$t</span>$ <span class="kw">variable</span></span>
<span id="cb3-2"><a></a><span class="kw">xtreg</span> <span class="fu">y</span> x1 <span class="kw">x2</span>, fe1 fe2 *\fixed <span class="kw">effects</span> separated <span class="kw">by</span> a <span class="kw">comma</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section></section>
<section>
<section id="the-random-effects-estimator" class="title-slide slide level1 center">
<h1>The Random Effects Estimator</h1>

</section>
<section id="the-random-effects-re-model" class="slide level2">
<h2>The Random Effects (RE) Model</h2>
<ul>
<li><strong>Core Idea:</strong> Instead of treating <span class="math inline">\(\alpha_i\)</span> as a fixed parameter for each individual, we treat it as a <strong>random variable</strong> that is part of the composite error term.</li>
</ul>
<div title="Definition: Random Effects">
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Definition: Random Effects</strong></p>
</div>
<div class="callout-content">
<p><span class="math display">\[ y_{it} = \beta_0 + \beta_1 X_{it} + u_{it} \]</span></p>
<p>Where the composite error term is: <span class="math display">\[ u_{it} = \alpha_i + \epsilon_{it} \]</span></p>
<ul>
<li><span class="math inline">\(\alpha_i\)</span> is the random individual-specific error component.</li>
<li><span class="math inline">\(\epsilon_{it}\)</span> is the idiosyncratic error.</li>
</ul>
</div>
</div>
</div>
</div>
<ul>
<li>The RE model is a compromise between Pooled OLS and Fixed Effects.</li>
</ul>
</section>
<section id="random-effects-specification" class="slide level2">
<h2>Random Effects Specification</h2>
<ul>
<li><p>The Random Effects Estimator can also be written as follows:</p>
<p><span class="math display">\[
  y_{it} - \theta \bar{y_i}  = \beta_1( x_{1it} -\theta\overline{x_{1i}}) +\dots + \beta_k(x_{kit} - \theta\overline{x_{ki}}) + (u_{it} -\theta \bar{u}_i)
\]</span></p></li>
<li><p><span class="math inline">\(\bar{y_i} = (1/T) \sum_t y_{it}\)</span> (the mean of <span class="math inline">\(y\)</span> for individual <span class="math inline">\(i\)</span>). Similar for <span class="math inline">\(\overline{x_{ji}}\)</span>.</p></li>
<li><p><span class="math inline">\(\theta = 1 - \sqrt{\frac{\sigma^2_\epsilon}{(T_i \sigma^2_\alpha + \sigma^2_\epsilon)}}\)</span>, with <span class="math inline">\(\sigma^2_{.}\)</span> denoting the variance of the <span class="math inline">\(\epsilon\)</span> and <span class="math inline">\(\alpha\)</span> terms respectively.</p></li>
<li><p><span class="math inline">\(T_i\)</span> is the no. of observations for individual <span class="math inline">\(i.\)</span> If balanced, <span class="math inline">\(T_i = T\)</span>.</p></li>
</ul>
</section>
<section id="the-key-assumption-for-random-effects" class="slide level2">
<h2>The Key Assumption for Random Effects</h2>
<ul>
<li>For the RE model to be valid (i.e., provide consistent estimates), we must assume:</li>
</ul>
<p><span class="math display">\[ E(\alpha_i | X_{it}) = 0 \]</span></p>
<ul>
<li><p><strong>In English:</strong> The unobserved individual-specific effects (<span class="math inline">\(\alpha_i\)</span>) are <strong>uncorrelated</strong> with the explanatory variables (<span class="math inline">\(X_{it}\)</span>) for all time periods.</p></li>
<li><p>This is a much stronger assumption than in the FE model.</p>
<ul>
<li><strong>Example where it might be violated:</strong> In a wage regression, if unobserved <code>ability</code> (<span class="math inline">\(\alpha_i\)</span>) is correlated with <code>education</code> (<span class="math inline">\(X_{it}\)</span>), the RE assumption is violated, and the RE estimator will be biased.</li>
<li><strong>Example where it might hold:</strong> In an experiment where treatment (<span class="math inline">\(X_{it}\)</span>) is randomly assigned, the assumption would hold by design.</li>
</ul></li>
</ul>
</section>
<section id="estimation-of-re-models-gls" class="slide level2">
<h2>Estimation of RE Models (GLS)</h2>
<ul>
<li><p>Estimating the RE model can “almost” be done using Pooled OLS.</p>
<ul>
<li>If we run Pooled OLS on the data, assuming the RE model, the estimates of <span class="math inline">\(\beta\)</span> will be unbiased (if the key assumption holds), but they will be <strong>inefficient</strong>.</li>
</ul></li>
<li><p>The composite error term <span class="math inline">\(u_{it} = \alpha_i + \epsilon_{it}\)</span> creates serial correlation within each individual.</p>
<ul>
<li>The error for individual <span class="math inline">\(i\)</span> at time <span class="math inline">\(t\)</span> is correlated with their error at time <span class="math inline">\(t+1\)</span> because they share the same <span class="math inline">\(\alpha_i\)</span>:</li>
</ul>
<p><span class="math display">\[\rho(u_{it}, u_{is}) \neq 0 \quad \text{for } t \neq s\]</span></p></li>
<li><p><strong>Solution:</strong> Generalized Least Squares (GLS).</p>
<ul>
<li>GLS is a method that transforms the data to account for this specific error structure, producing efficient estimates.</li>
<li>In practice, we use <strong>Feasible GLS (FGLS)</strong> because we have to estimate the components of the error correlation first. This is what statistical software does automatically.</li>
</ul></li>
</ul>
</section>
<section id="interpretation-of-re-coefficients" class="slide level2">
<h2>Interpretation of RE Coefficients</h2>
<ul>
<li>The RE estimator uses a weighted average of the “within” and “between” variation in the data.</li>
</ul>
<div title="Interpretation of RE Estimates">
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Interpretation of RE Estimates</strong></p>
</div>
<div class="callout-content">
<p>The coefficient <span class="math inline">\(\beta_1\)</span> from an RE model is interpreted as:</p>
<p>The estimated change in <span class="math inline">\(y\)</span> for a one-unit increase in <span class="math inline">\(X\)</span>, assuming the unobserved individual effects <span class="math inline">\(\alpha_i\)</span> are uncorrelated with <span class="math inline">\(X\)</span>.</p>
</div>
</div>
</div>
</div>
<ul>
<li>It’s a more general interpretation than the FE coefficient.</li>
<li>The reliability of this interpretation hinges entirely on the key RE assumption holding true.</li>
</ul>
</section>
<section id="pros-and-cons-of-the-random-effects-model" class="slide level2">
<h2>Pros and Cons of the Random Effects Model</h2>
<ul>
<li><strong>Pros:</strong>
<ul>
<li><strong>Can estimate the effects of time-invariant variables</strong> (e.g., gender, race, industry), because it does not wipe them out.</li>
<li><strong>More efficient</strong> (i.e., has smaller standard errors) than the FE model, <em>if</em> the key assumption (<span class="math inline">\(E(\alpha_i | X_{it}) = 0\)</span>) is met. It uses both “within” and “between” variation.</li>
</ul></li>
<li><strong>Cons:</strong>
<ul>
<li><strong>Estimates are biased and inconsistent if the key assumption is violated.</strong> This is the critical weakness. If the unobserved effects are correlated with your regressors, the RE model suffers from omitted variable bias.</li>
</ul></li>
</ul>
</section>
<section id="comparing-fe-and-re-the-hausman-test" class="slide level2">
<h2>Comparing FE and RE: The Hausman Test</h2>
<ul>
<li><p>So, which model should we use? FE or RE? The <strong>Hausman Test</strong> helps us decide.</p></li>
<li><p><strong>Intuition:</strong></p>
<ul>
<li>The FE estimator is <strong>always consistent</strong>, whether the unobserved effects <span class="math inline">\(\alpha_i\)</span> are correlated with <span class="math inline">\(X\)</span> or not.</li>
<li>The RE estimator is <strong>consistent AND efficient</strong> if <span class="math inline">\(\alpha_i\)</span> and <span class="math inline">\(X\)</span> are uncorrelated, but <strong>inconsistent</strong> if they are correlated.</li>
</ul></li>
<li><p><strong>The Test:</strong> We compare the coefficient estimates from FE and RE.</p>
<ul>
<li>If the coefficients are “close” to each other, it suggests the RE assumption holds, and we should use the more efficient RE model.</li>
<li>If the coefficients are “far apart” and statistically different, it suggests the RE assumption is violated. We must use the consistent FE model.</li>
</ul></li>
</ul>
</section>
<section id="hausman-test-statistic" class="slide level2">
<h2>Hausman Test Statistic</h2>
<ul>
<li><p>The test is based on the difference between the coefficient vectors from the two models: <span class="math inline">\((\hat{\beta}_{FE} - \hat{\beta}_{RE})\)</span>.</p></li>
<li><p>The Hausman statistic, <span class="math inline">\(H\)</span>, is a measure of the squared distance between the two vectors of coefficients, weighted by the precision (1/variance) of this difference.</p>
<ul>
<li>It is constructed so that large, systematic differences between the coefficients lead to a large test statistic.</li>
</ul></li>
<li><p>Under the null hypothesis (<span class="math inline">\(H_0\)</span>), the test statistic follows a Chi-squared distribution with <span class="math inline">\(k\)</span> degrees of freedom, where <span class="math inline">\(k\)</span> is the number of time-varying regressors in the model.</p></li>
</ul>
<p><span class="math display">\[ H \sim \chi^2(k) \]</span></p>
</section>
<section id="chi2-test-visualization" class="slide level2">
<h2><span class="math inline">\(\chi^2\)</span> Test Visualization</h2>
<ul>
<li>The <span class="math inline">\(\chi^2\)</span> distribution is one-sided.
<ul>
<li>A significance level <span class="math inline">\(\alpha\)</span> gives you a critical value on the basis of which a test can be rejected.</li>
<li>Alternatively, the <span class="math inline">\(p\)</span>-value can be calculated according to the cdf.</li>
</ul></li>
</ul>

<img data-src="lecture5_files/figure-revealjs/unnamed-chunk-5-1.png" class="quarto-figure quarto-figure-center r-stretch" width="960"></section>
<section id="the-hausman-test-application" class="slide level2">
<h2>The Hausman Test: Application</h2>
<div title="Hausman Test: Procedure">
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Hausman Test: Procedure</strong></p>
</div>
<div class="callout-content">
<ul>
<li><p><span class="math inline">\(H_0\)</span>: The Random Effects model is the appropriate model. (The difference in coefficients between FE and RE is not systematic, i.e., <span class="math inline">\(E(\alpha_i | X_{it}) = 0\)</span>).</p></li>
<li><p><span class="math inline">\(H_A\)</span>: The Fixed Effects model is the appropriate model. (The difference in coefficients is systematic, i.e., <span class="math inline">\(E(\alpha_i | X_{it}) \neq 0\)</span>).</p></li>
<li><p>Statistical software calculates a test statistic (Chi-squared) and a p-value.</p>
<ul>
<li><strong>If p-value &lt; 0.05 (or your chosen significance level):</strong> Reject the null hypothesis. The models are significantly different. Conclude that the RE assumption is likely violated. <strong>Use the Fixed Effects model.</strong></li>
<li><strong>If p-value &gt;= 0.05:</strong> Fail to reject the null hypothesis. You do not have evidence that the RE assumption is violated. <strong>Use the more efficient Random Effects model.</strong></li>
</ul></li>
</ul>
</div>
</div>
</div>
</div>
</section></section>
<section>
<section id="the-first-difference-estimator" class="title-slide slide level1 center">
<h1>The First Difference Estimator</h1>

</section>
<section id="the-first-difference-model" class="slide level2">
<h2>The First Difference Model</h2>
<ul>
<li>There is another way to eliminate the fixed effect <span class="math inline">\(\alpha_i\)</span>. Instead of de-meaning, we difference the data across time periods.</li>
</ul>
<div title="First Differences: Procedure">
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>First Differences: Procedure</strong></p>
</div>
<div class="callout-content">
<p><strong>Original Model at time t:</strong> <span class="math inline">\(y_{it} = \alpha_i + \beta_1 X_{it} + \epsilon_{it}\)</span></p>
<p><strong>Model at time t-1:</strong> <span class="math inline">\(y_{i,t-1} = \alpha_i + \beta_1 X_{i,t-1} + \epsilon_{i,t-1}\)</span></p>
<p><strong>Subtracting the two:</strong> <span class="math display">\[
    (y_{it} - y_{i,t-1}) = \beta_1 (X_{it} - X_{i,t-1}) + (\epsilon_{it} - \epsilon_{i,t-1})
  \]</span> <span class="math display">\[\Delta y_{it} = \beta_1 \Delta X_{it} + \Delta \epsilon_{it}\]</span></p>
<p>The fixed effect <span class="math inline">\(\alpha_i\)</span> is eliminated. We can estimate <span class="math inline">\(\beta_1\)</span> by running OLS on the differenced data.</p>
</div>
</div>
</div>
</div>
</section>
<section id="fd-vs.-fe-the-case-of-random-walk-errors" class="slide level2">
<h2>FD vs.&nbsp;FE: The Case of Random Walk Errors</h2>
<ul>
<li>The standard Fixed Effects (FE) estimator is the most efficient linear unbiased estimator when the idiosyncratic errors, <span class="math inline">\(\epsilon_{it}\)</span>, are serially uncorrelated.
<ul>
<li>But what happens if they are not?</li>
</ul></li>
</ul>
<div title="Panel Data Model with a Random Walk Error">
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Panel Data Model with a Random Walk Error</strong></p>
</div>
<div class="callout-content">
<ul>
<li>Consider the case where the error term follows a <strong>random walk</strong>:</li>
</ul>
<p><span class="math display">\[ y_{it} = \beta_1 X_{it} + \alpha_i + \epsilon_{it} \]</span></p>
<ul>
<li>Let’s assume the error term <span class="math inline">\(\epsilon_{it}\)</span> is not i.i.d., but instead follows a random walk process. This means today’s error is equal to yesterday’s error plus a new, well-behaved shock, <span class="math inline">\(\nu_{it}\)</span>.</li>
</ul>
<p><span class="math display">\[ \epsilon_{it} = \epsilon_{i,t-1} + \nu_{it} \]</span></p>
<ul>
<li>Here, <span class="math inline">\(\nu_{it}\)</span> is a “white noise” error, meaning it is not serially correlated. The random walk structure means that <span class="math inline">\(\epsilon_{it}\)</span> is highly serially correlated.</li>
</ul>
</div>
</div>
</div>
</div>
</section>
<section id="impact-on-the-fe-estimator" class="slide level2">
<h2>Impact on the FE Estimator</h2>
<ul>
<li><p>The FE estimator transforms the model by de-meaning the data.</p></li>
<li><p>The resulting error term is:</p>
<p><span class="math display">\[
  \tilde{\epsilon}_{it} = \epsilon_{it} - \bar{\epsilon}_i
\]</span></p></li>
<li><p>If the original error <span class="math inline">\(\epsilon_{it}\)</span> has a random walk structure, this transformed error <span class="math inline">\(\tilde{\epsilon}_{it}\)</span> will <strong>still be serially correlated</strong>.</p></li>
<li><p>While the FE estimator remains consistent, it is no longer efficient, and standard errors will be biased unless we use robust (clustered) standard errors.</p></li>
</ul>
</section>
<section id="impact-on-the-fd-estimator" class="slide level2">
<h2>Impact on the FD Estimator</h2>
<ul>
<li><p>The First Differences (FD) estimator transforms the model by differencing the data.</p></li>
<li><p>The new error term is the difference of the original errors:</p>
<p><span class="math display">\[
  \Delta \epsilon_{it} = \epsilon_{it} - \epsilon_{i,t-1}
\]</span></p></li>
<li><p>Now, let’s substitute our random walk assumption into this equation:</p>
<p><span class="math display">\[
  \Delta \epsilon_{it} = (\epsilon_{i,t-1} + \nu_{it}) - \epsilon_{i,t-1}
\]</span></p></li>
<li><p>This simplifies perfectly to <span class="math inline">\(\Delta \epsilon_{it} = \nu_{it}\)</span>.</p></li>
</ul>
</section>
<section id="conclusion" class="slide level2">
<h2>Conclusion</h2>
<ul>
<li><p>The FD transformation has converted the highly serially correlated random walk error (<span class="math inline">\(\epsilon_{it}\)</span>) into a non-serially correlated error (<span class="math inline">\(\nu_{it}\)</span>).</p></li>
<li><p>Because OLS on the transformed data is most efficient when the errors are not serially correlated, the <strong>FD estimator will be more efficient than the FE estimator</strong> under the specific condition of random walk errors.</p>
<ul>
<li>This makes FD a powerful alternative, especially for panels with a long time dimension (large T) where such error dynamics are more plausible.</li>
</ul></li>
<li><p><strong>Comparison with FE:</strong></p>
<ul>
<li>If <span class="math inline">\(T=2\)</span>, FD and FE give identical results.</li>
<li>For <span class="math inline">\(T&gt;2\)</span>, they are different. FE is more efficient if the original errors (<span class="math inline">\(\epsilon_{it}\)</span>) are not serially correlated.</li>
<li>FD can be better if the errors follow a random walk. FD is a popular choice for robustness checks.</li>
</ul></li>
</ul>
</section>
<section id="practical-considerations-summary" class="slide level2">
<h2>Practical Considerations &amp; Summary</h2>
<ul>
<li>In practice, researchers opt almost always for the FE model.
<ul>
<li>However, if you want to be robust, you can follow this workflow:</li>
</ul></li>
</ul>
<div title="Workflow for Panel Models">
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Workflow for Panel Models</strong></p>
</div>
<div class="callout-content">
<ol type="1">
<li>Start by considering your research question. Are you interested in time-invariant variables? If yes, FE is not an option for those variables.</li>
<li>Run both FE and RE models.</li>
<li>Perform the Hausman test.</li>
<li><strong>If Hausman test rejects H0 (p &lt; 0.05):</strong> Use FE. The correlation between unobserved effects and your regressors is a significant problem that FE solves.</li>
<li><strong>If Hausman test fails to reject H0 (p &gt;= 0.05):</strong> You can justify using the more efficient Random Effects model.</li>
<li>Consider Pooled OLS only if you have a strong theoretical reason to believe there is no unobserved heterogeneity (very rare).</li>
<li>Consider the First Differences model as a robustness check.</li>
</ol>
</div>
</div>
</div>
</div>
</section></section>
<section>
<section id="event-studies" class="title-slide slide level1 center">
<h1>Event Studies</h1>

</section>
<section id="what-is-an-event-study" class="slide level2">
<h2>What is an Event Study?</h2>
<ul>
<li><p>A special case of the panel data model is an <em>event study</em></p></li>
<li><p>To measure the economic impact of a specific, identifiable <strong>event</strong> on an outcome of interest.</p></li>
</ul>
<div title="Example: Event Studies">
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Example: Event Studies</strong></p>
</div>
<div class="callout-content">
<ul>
<li><strong>The “Event” could be:</strong>
<ul>
<li>A company-specific event: Merger announcement, CEO change, earnings surprise.</li>
<li>A policy change: A new tax law, a change in minimum wage.</li>
<li>A natural event: A major hurricane, a pandemic.</li>
</ul></li>
<li><strong>The “Outcome” is often:</strong>
<ul>
<li>A firm’s stock price (most common in finance).</li>
<li>A firm’s accounting performance (sales, profits).</li>
<li>A macroeconomic variable (unemployment, inflation).</li>
</ul></li>
</ul>
</div>
</div>
</div>
</div>
<ul>
<li>The central challenge is to determine what the outcome <em>would have been</em> if the event had not occurred.</li>
</ul>
</section>
<section id="panel-event-study-model-with-controls" class="slide level2">
<h2>Panel Event Study Model With Controls</h2>
<ul>
<li>The canonical event study model uses firm and time fixed effects and replaces the single interaction term with a series of dummies for time <em>relative to the event</em>.</li>
</ul>
<div title="Definition: Panel Event Study Model (with Control Subjects)">
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Definition: Panel Event Study Model (with Control Subjects)</strong></p>
</div>
<div class="callout-content">
<p><span class="math display">\[ y_{it} = \alpha_i + \lambda_t + \sum_{k=-K}^{L} \delta_k D_{it}^k + \epsilon_{it} \]</span></p>
<ul>
<li><span class="math inline">\(\alpha_i\)</span>: <strong>Firm Fixed Effects</strong>. These absorb all time-invariant differences between firms.</li>
<li><span class="math inline">\(\lambda_t\)</span>: <strong>Time Fixed Effects</strong>. These absorb all shocks or trends common to all firms in a given year <code>t</code>.</li>
<li><span class="math inline">\(D_{it}^k\)</span>: A dummy variable equal to 1 if firm <code>i</code> in year <code>t</code> is <code>k</code> periods away from its event date. <code>k</code> is the <strong>relative time</strong> or <strong>event time</strong>.</li>
<li><strong><span class="math inline">\(\delta_k\)</span> are the key coefficients.</strong> They measure the average change in the outcome for treated firms <code>k</code> periods away from the event, relative to the control group.</li>
</ul>
</div>
</div>
</div>
</div>
</section>
<section id="example-dataset" class="slide level2">
<h2>Example Dataset</h2>
<ul>
<li>A dataset for an event study would look as follows:
<ul>
<li><em>Note: For simplicity, only dummy columns for <span class="math inline">\(k = -2, -1, 0, 1\)</span> are included - a full model would include dummies for all relevant pre/post periods (e.g., <span class="math inline">\(k \leq 3\)</span> and <span class="math inline">\(k \geq 2\)</span>).</em></li>
</ul></li>
</ul>
<table class="caption-top">
<colgroup>
<col style="width: 9%">
<col style="width: 7%">
<col style="width: 13%">
<col style="width: 21%">
<col style="width: 12%">
<col style="width: 9%">
<col style="width: 9%">
<col style="width: 8%">
<col style="width: 8%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Firm ID (<code>i</code>)</th>
<th style="text-align: center;">Year (<code>t</code>)</th>
<th style="text-align: center;">Event Year (<code>E_i</code>)</th>
<th style="text-align: center;">Relative Time (<code>k = t - E_i</code>)</th>
<th style="text-align: center;">Outcome (<code>y_it</code>)</th>
<th style="text-align: center;">Dummy <code>k=-2</code></th>
<th style="text-align: center;">Dummy <code>k=-1</code></th>
<th style="text-align: center;">Dummy <code>k=0</code></th>
<th style="text-align: center;">Dummy <code>k=1</code></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">1 (Control)</td>
<td style="text-align: center;">2021</td>
<td style="text-align: center;">NA</td>
<td style="text-align: center;">NA</td>
<td style="text-align: center;">2.0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">1 (Control)</td>
<td style="text-align: center;">2022</td>
<td style="text-align: center;">NA</td>
<td style="text-align: center;">NA</td>
<td style="text-align: center;">2.1</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">1 (Control)</td>
<td style="text-align: center;">2023</td>
<td style="text-align: center;">NA</td>
<td style="text-align: center;">NA</td>
<td style="text-align: center;">2.2</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">1 (Control)</td>
<td style="text-align: center;">2024</td>
<td style="text-align: center;">NA</td>
<td style="text-align: center;">NA</td>
<td style="text-align: center;">2.3</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">1 (Control)</td>
<td style="text-align: center;">2025</td>
<td style="text-align: center;">NA</td>
<td style="text-align: center;">NA</td>
<td style="text-align: center;">2.4</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>2 (Treated)</strong></td>
<td style="text-align: center;">2021</td>
<td style="text-align: center;"><strong>2023</strong></td>
<td style="text-align: center;">-2</td>
<td style="text-align: center;">2.5</td>
<td style="text-align: center;"><strong>1</strong></td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>2 (Treated)</strong></td>
<td style="text-align: center;">2022</td>
<td style="text-align: center;"><strong>2023</strong></td>
<td style="text-align: center;">-1</td>
<td style="text-align: center;">2.6</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;"><strong>1</strong></td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>2 (Treated)</strong></td>
<td style="text-align: center;">2023</td>
<td style="text-align: center;"><strong>2023</strong></td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">5.5</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;"><strong>1</strong></td>
<td style="text-align: center;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>2 (Treated)</strong></td>
<td style="text-align: center;">2024</td>
<td style="text-align: center;"><strong>2023</strong></td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">5.8</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;"><strong>1</strong></td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>2 (Treated)</strong></td>
<td style="text-align: center;">2025</td>
<td style="text-align: center;"><strong>2023</strong></td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">6.0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>3 (Treated)</strong></td>
<td style="text-align: center;">2021</td>
<td style="text-align: center;"><strong>2024</strong></td>
<td style="text-align: center;">-3</td>
<td style="text-align: center;">3.1</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>3 (Treated)</strong></td>
<td style="text-align: center;">2022</td>
<td style="text-align: center;"><strong>2024</strong></td>
<td style="text-align: center;">-2</td>
<td style="text-align: center;">3.3</td>
<td style="text-align: center;"><strong>1</strong></td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>3 (Treated)</strong></td>
<td style="text-align: center;">2023</td>
<td style="text-align: center;"><strong>2024</strong></td>
<td style="text-align: center;">-1</td>
<td style="text-align: center;">3.4</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;"><strong>1</strong></td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>3 (Treated)</strong></td>
<td style="text-align: center;">2024</td>
<td style="text-align: center;"><strong>2024</strong></td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">7.1</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;"><strong>1</strong></td>
<td style="text-align: center;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>3 (Treated)</strong></td>
<td style="text-align: center;">2025</td>
<td style="text-align: center;"><strong>2024</strong></td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">7.5</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;"><strong>1</strong></td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>4 (Treated)</strong></td>
<td style="text-align: center;">2021</td>
<td style="text-align: center;"><strong>2024</strong></td>
<td style="text-align: center;">-3</td>
<td style="text-align: center;">2.9</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>4 (Treated)</strong></td>
<td style="text-align: center;">2022</td>
<td style="text-align: center;"><strong>2024</strong></td>
<td style="text-align: center;">-2</td>
<td style="text-align: center;">3.0</td>
<td style="text-align: center;"><strong>1</strong></td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>4 (Treated)</strong></td>
<td style="text-align: center;">2023</td>
<td style="text-align: center;"><strong>2024</strong></td>
<td style="text-align: center;">-1</td>
<td style="text-align: center;">3.2</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;"><strong>1</strong></td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>4 (Treated)</strong></td>
<td style="text-align: center;">2024</td>
<td style="text-align: center;"><strong>2024</strong></td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">6.8</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;"><strong>1</strong></td>
<td style="text-align: center;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>4 (Treated)</strong></td>
<td style="text-align: center;">2025</td>
<td style="text-align: center;"><strong>2024</strong></td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">7.2</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;"><strong>1</strong></td>
</tr>
</tbody>
</table>
</section>
<section id="interpretation-of-the-results" class="slide level2">
<h2>Interpretation of the Results</h2>
<ul>
<li>After running the regression, you will get a set of coefficients <code>δ_k</code> which are typically plotted on a graph:</li>
<li><strong>Testing Pre-Trends (<code>k &lt; 0</code>):</strong> The coefficients <code>δ_{-K}, ..., δ_{-2}</code> test the crucial parallel trends assumption. If the model is valid, these coefficients should be close to zero and not statistically significant.</li>
<li><strong>The Effect at Impact (<code>k = 0</code>):</strong> <code>δ_0</code> shows the immediate effect of the treatment in the event period itself.</li>
<li><strong>Dynamic Post-Treatment Effects (<code>k &gt; 0</code>):</strong> <code>δ_1, δ_2, ..., δ_L</code> show how the treatment effect evolves over time after the event. It might grow, shrink, or stay constant.</li>
</ul>
</section>
<section id="event-study-visualization" class="slide level2">
<h2>Event Study Visualization</h2>

<img data-src="lecture5_files/figure-revealjs/unnamed-chunk-6-1.png" class="quarto-figure quarto-figure-center r-stretch" width="768"></section>
<section id="what-happens-without-a-control-group" class="slide level2">
<h2>What Happens Without a Control Group?</h2>
<ul>
<li>Imagine you removed the control firm (Firm 1) from the dataset.
<ul>
<li>Now, in the year 2023, the only firms you have are Firm 2 (which just got treated, k=0) and Firms 3 &amp; 4 (which are pre-treatment, k=-1).</li>
</ul></li>
<li>The regression would see that Firm 2’s outcome went up in 2023. But it has no way to know:
<ul>
<li>Was it because of the treatment (<span class="math inline">\(\delta_0\)</span>)?</li>
<li>Or was 2023 just a great year for everyone (<span class="math inline">\(\lambda_{2023}\)</span>)?</li>
</ul></li>
<li>Without the control group, the effect of being in the year 2023 (<span class="math inline">\(\lambda_{2023}\)</span>) is perfectly collinear with the effect of being treated in 2023 (<span class="math inline">\(\delta_0\)</span>).</li>
<li>The model cannot distinguish between them, and the regression will fail or produce meaningless results.</li>
</ul>
</section></section>
<section>
<section id="event-studies-without-control-subjects" class="title-slide slide level1 center">
<h1>Event Studies Without Control Subjects</h1>

</section>
<section id="event-study-without-control-subjects" class="slide level2">
<h2>Event Study Without Control Subjects</h2>
<ul>
<li><p>There are, however, also event studies that do not need control firms.</p></li>
<li><p>These tend to make use of an <strong>estimation window:</strong> a “clean” period <strong>before</strong> the event.</p></li>
<li><p>This is used to establish a baseline or “normal” behavior for the outcome variable. Typically, ~120 to ~250 days before the event window.</p></li>
<li><p>The period immediately surrounding (or after) the event date where we expect to see an impact. For example, from 5 days before to 5 days after the announcement ([-5, +5]).</p></li>
</ul>
</section>
<section id="specification" class="slide level2">
<h2>Specification</h2>
<div title="Definition: Event Study (Without Control Group)">
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Definition: Event Study (Without Control Group)</strong></p>
</div>
<div class="callout-content">
<ul>
<li><p>The model you can estimate with only treated units is:</p>
<p><span class="math display">\[
  y_{it} = \alpha_i + \sum_{k=-K}^{L} \delta_k D_{it}^k + \epsilon_{it}
\]</span></p></li>
<li><p><span class="math inline">\(y_{it}\)</span>: The outcome for firm <code>i</code> at time <code>t</code>.</p></li>
<li><p><span class="math inline">\(\alpha_i\)</span>: <strong>Firm Fixed Effects</strong>. These absorb all stable, time-invariant differences between the treated firms.</p></li>
<li><p><span class="math inline">\(D_{it}^k\)</span>: A dummy variable = 1 if firm <code>i</code> in year <code>t</code> is <code>k</code> periods away from its event date.</p></li>
<li><p><strong><span class="math inline">\(\delta_k\)</span> are the key coefficients.</strong> They measure the average outcome for a firm <code>k</code> periods from its event, <em>relative to the outcome in the omitted baseline period</em> (usually <code>k=-1</code>).</p></li>
<li><p>There are no <span class="math inline">\(\lambda_t\)</span> (time fixed effects). You cannot include them.</p>
<ul>
<li>If you did, the model could not be estimated because your event-time dummies (<span class="math inline">\(D^k\)</span>) would be perfectly predicted by the combination of firm and time fixed effects.</li>
</ul></li>
</ul>
</div>
</div>
</div>
</div>
</section>
<section id="example-required-dataset-no-control-group" class="slide level2">
<h2>Example Required Dataset (No Control Group)</h2>
<ul>
<li>Let’s use the same staggered adoption scenario as before, but we’ll <strong>remove the control firm (Firm 1)</strong>.</li>
</ul>
<table class="caption-top">
<colgroup>
<col style="width: 9%">
<col style="width: 6%">
<col style="width: 12%">
<col style="width: 20%">
<col style="width: 11%">
<col style="width: 8%">
<col style="width: 16%">
<col style="width: 7%">
<col style="width: 7%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Firm ID (<code>i</code>)</th>
<th style="text-align: center;">Year (<code>t</code>)</th>
<th style="text-align: center;">Event Year (<code>E_i</code>)</th>
<th style="text-align: center;">Relative Time (<code>k = t - E_i</code>)</th>
<th style="text-align: center;">Outcome (<code>y_it</code>)</th>
<th style="text-align: center;">Dummy <code>k=-2</code></th>
<th style="text-align: center;">Dummy <code>k=-1</code> (Baseline)</th>
<th style="text-align: center;">Dummy <code>k=0</code></th>
<th style="text-align: center;">Dummy <code>k=1</code></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><strong>2 (Treated)</strong></td>
<td style="text-align: center;">2021</td>
<td style="text-align: center;"><strong>2023</strong></td>
<td style="text-align: center;">-2</td>
<td style="text-align: center;">2.5</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>2 (Treated)</strong></td>
<td style="text-align: center;">2022</td>
<td style="text-align: center;"><strong>2023</strong></td>
<td style="text-align: center;">-1</td>
<td style="text-align: center;">2.6</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>2 (Treated)</strong></td>
<td style="text-align: center;">2023</td>
<td style="text-align: center;"><strong>2023</strong></td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">5.5</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>2 (Treated)</strong></td>
<td style="text-align: center;">2024</td>
<td style="text-align: center;"><strong>2023</strong></td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">5.8</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>2 (Treated)</strong></td>
<td style="text-align: center;">2025</td>
<td style="text-align: center;"><strong>2023</strong></td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">6.0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>3 (Treated)</strong></td>
<td style="text-align: center;">2021</td>
<td style="text-align: center;"><strong>2024</strong></td>
<td style="text-align: center;">-3</td>
<td style="text-align: center;">3.1</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>3 (Treated)</strong></td>
<td style="text-align: center;">2022</td>
<td style="text-align: center;"><strong>2024</strong></td>
<td style="text-align: center;">-2</td>
<td style="text-align: center;">3.3</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>3 (Treated)</strong></td>
<td style="text-align: center;">2023</td>
<td style="text-align: center;"><strong>2024</strong></td>
<td style="text-align: center;">-1</td>
<td style="text-align: center;">3.4</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>3 (Treated)</strong></td>
<td style="text-align: center;">2024</td>
<td style="text-align: center;"><strong>2024</strong></td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">7.1</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>3 (Treated)</strong></td>
<td style="text-align: center;">2025</td>
<td style="text-align: center;"><strong>2024</strong></td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">7.5</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>4 (Treated)</strong></td>
<td style="text-align: center;">2021</td>
<td style="text-align: center;"><strong>2024</strong></td>
<td style="text-align: center;">-3</td>
<td style="text-align: center;">2.9</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>4 (Treated)</strong></td>
<td style="text-align: center;">2022</td>
<td style="text-align: center;"><strong>2024</strong></td>
<td style="text-align: center;">-2</td>
<td style="text-align: center;">3.0</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>4 (Treated)</strong></td>
<td style="text-align: center;">2023</td>
<td style="text-align: center;"><strong>2024</strong></td>
<td style="text-align: center;">-1</td>
<td style="text-align: center;">3.2</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>4 (Treated)</strong></td>
<td style="text-align: center;">2024</td>
<td style="text-align: center;"><strong>2024</strong></td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">6.8</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>4 (Treated)</strong></td>
<td style="text-align: center;">2025</td>
<td style="text-align: center;"><strong>2024</strong></td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">7.2</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">1</td>
</tr>
</tbody>
</table>
</section>
<section id="crucial-caveat-the-problem-with-this-approach" class="slide level2">
<h2>Crucial Caveat: The Problem with This Approach</h2>
<ul>
<li><p>Estimating this model means your results for <span class="math inline">\(\delta_k\)</span> are highly susceptible to bias from confounding factors.</p></li>
<li><p><strong>The coefficient <span class="math inline">\(\delta_k\)</span> now measures the sum of two things:</strong></p>
<ul>
<li>The true causal effect of the treatment at relative time <code>k</code>.</li>
<li><strong>Any and all other unobserved shocks or trends that happened to occur at relative time <code>k</code></strong>.</li>
</ul></li>
</ul>
<div title="Example: Confounding Factor">
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Example: Confounding Factor</strong></p>
</div>
<div class="callout-content">
<p>Let’s say a major economic boom started in 2023.</p>
<ul>
<li>For Firm 2, its outcome <code>y</code> jumps in 2023. The model will attribute this entire jump to the treatment (<span class="math inline">\(\delta_0\)</span>) because it has no control group to learn that <em>all</em> firms (even untreated ones) would have seen a jump in 2023.</li>
<li>Your estimate of the treatment effect will be severely biased upwards.</li>
</ul>
</div>
</div>
</div>
</div>
</section>
<section id="the-core-idea-abnormal-returns" class="slide level2">
<h2>The Core Idea: Abnormal Returns</h2>
<ul>
<li>An event study with control firms works by isolating the “abnormal” part of an outcome’s movement.</li>
</ul>
<div title="Definition: Abnormal Return">
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Definition: Abnormal Return</strong></p>
</div>
<div class="callout-content">
<p><span class="math display">\[ \text{Abnormal Return}_{it} = \text{Actual Return}_{it} - \text{Normal Return}_{it} \]</span></p>
<ul>
<li><strong>Actual Return (<span class="math inline">\(R_{it}\)</span>):</strong> The observed outcome for firm <span class="math inline">\(i\)</span> on day <span class="math inline">\(t\)</span>. This is the raw data.</li>
<li><strong>Normal Return (<span class="math inline">\(E[R_{it}]\)</span>):</strong> The expected return for firm <span class="math inline">\(i\)</span> on day <span class="math inline">\(t\)</span>, <strong>conditional on the event not happening</strong>. This is our counterfactual.</li>
</ul>
</div>
</div>
</div>
</div>
<ul>
<li>We need a model to estimate the Normal Return.</li>
</ul>
</section>
<section id="estimating-normal-returns" class="slide level2">
<h2>Estimating “Normal” Returns</h2>
<ul>
<li>The Normal Return is estimated using data from the <strong>estimation window</strong>.</li>
</ul>
<div title="Examples of Normal Return Models">
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Examples of Normal Return Models</strong></p>
</div>
<div class="callout-content">
<p><strong>Constant Mean Return Model:</strong> Assumes the normal return is just the firm’s average return during the estimation period: <span class="math inline">\(E[R_{it}] = \bar{R}_i\)</span></p>
<p><strong>Market Model:</strong> Assumes the firm’s return is related to the overall market return (e.g., S&amp;P 500).</p>
<ul>
<li>We run an OLS regression (one for each firm) using data <strong>only from the estimation window</strong>: <span class="math inline">\(R_{it} = \alpha_i + \beta_i R_{mt} + e_{it}\)</span></li>
<li>Here, <span class="math inline">\(R_{mt}\)</span> is the return on the market index. We get estimates for <span class="math inline">\(\hat{\alpha}_i\)</span> and <span class="math inline">\(\hat{\beta}_i\)</span>.</li>
<li>The Normal Return for any day <span class="math inline">\(t\)</span> in the <strong>event window</strong> is then predicted as: <span class="math inline">\(\widehat{E[R_{it}]} = \hat{\alpha}_i + \hat{\beta}_i R_{mt}\)</span>.</li>
</ul>
</div>
</div>
</div>
</div>
</section>
<section id="calculating-abnormal-returns-ar" class="slide level2">
<h2>Calculating Abnormal Returns (AR)</h2>
<ul>
<li>Once we have our estimate of the Normal Return, we can calculate the Abnormal Return (AR) for each firm <span class="math inline">\(i\)</span> on each day <span class="math inline">\(t\)</span> in the <strong>event window</strong>.</li>
</ul>
<p><span class="math display">\[ AR_{it} = R_{it} - (\hat{\alpha}_i + \hat{\beta}_i R_{mt}) \]</span></p>
<ul>
<li><span class="math inline">\(AR_{it} &gt; 0\)</span> suggests positive news or impact.</li>
<li><span class="math inline">\(AR_{it} &lt; 0\)</span> suggests negative news or impact.</li>
<li><span class="math inline">\(AR_{it} \approx 0\)</span> suggests no impact.</li>
</ul>
</section>
<section id="aggregating-abnormal-returns-car" class="slide level2">
<h2>Aggregating Abnormal Returns (CAR)</h2>
<ul>
<li>We are usually interested in the overall effect, not just one firm on one day. We are interested in two things:</li>
</ul>
<div title="Aggregation of Abnormal Returns">
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Aggregation of Abnormal Returns</strong></p>
</div>
<div class="callout-content">
<p><strong>1. Average Abnormal Return (AAR):</strong> Average the abnormal returns across all <span class="math inline">\(N\)</span> firms for a single day <span class="math inline">\(t\)</span> in the event window. <span class="math display">\[
      AAR_t = \frac{1}{N} \sum_{i=1}^{N} AR_{it}
    \]</span></p>
<ul>
<li>This gives us the average effect on a specific day relative to the event (e.g., the effect on day t=+1).</li>
</ul>
</div>
</div>
</div>
</div>
</section>
<section id="aggregating-abnormal-returns-car-cont." class="slide level2">
<h2>Aggregating Abnormal Returns (CAR) (Cont.)</h2>
<div title="Aggregation of Abnormal Returns">
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Aggregation of Abnormal Returns</strong></p>
</div>
<div class="callout-content">
<p><strong>2. Cumulative Average Abnormal Return (CAAR or CAR):</strong> Sum the AARs over a period of time within the event window (from <span class="math inline">\(t_1\)</span> to <span class="math inline">\(t_2\)</span>). <span class="math display">\[
    CAR(t_1, t_2) = \sum_{t=t_1}^{t_2} AAR_t
  \]</span></p>
<ul>
<li>This tells us the total cumulative impact of the event over a specific window. For example, <span class="math inline">\(CAR(-1, +1)\)</span> measures the total effect from the day before to the day after the event.</li>
</ul>
</div>
</div>
</div>
</div>
</section>
<section id="visualizing-event-study-results" class="slide level2">
<h2>Visualizing Event Study Results</h2>
<ul>
<li>The standard way to present results is a plot of the Average Abnormal Return (AAR) over the event window.</li>
</ul>

<img data-src="lecture5_files/figure-revealjs/unnamed-chunk-7-1.png" class="quarto-figure quarto-figure-center r-stretch" width="1152"></section>
<section id="hypothesis-testing" class="slide level2">
<h2>Hypothesis Testing</h2>
<ul>
<li>Standard <span class="math inline">\(t\)</span>-statistics from regression estimates can be used to test hypotheses on AAR’s on particular days.</li>
<li>We might also be interested in hypothesis testing of CAR’s.
<ul>
<li>Is the observed CAR just random noise, or is there a real effect?</li>
<li>The null hypothesis is typically <span class="math inline">\(H_0: CAR(t_1, t_2) = 0\)</span>.</li>
<li>Standard errors are calculated based on the variance of the returns in the estimation window.</li>
<li>If the t-statistic is large enough (and p-value is small), we conclude the event had a statistically significant impact.</li>
</ul></li>
</ul>
</section>
<section id="assumptions-and-caveats-in-event-studies" class="slide level2">
<h2>Assumptions and Caveats in Event Studies</h2>
<ul>
<li><p>Event studies without a control group have various caveats and assumptions:</p>
<ul>
<li><strong>Efficient Markets (for stock studies):</strong> The model assumes prices react quickly and rationally to new information.</li>
<li><strong>No Confounding Events:</strong> The event window must be “clean” of other major, contemporaneous events that could also affect the outcome.</li>
<li><strong>Correct Event Date:</strong> The analysis is sensitive to using the right date of the information release.</li>
<li><strong>Model Specification:</strong> The results can depend on the model chosen for normal returns (e.g., Market Model vs.&nbsp;Fama-French 3-Factor Model).</li>
<li><strong>Stable Estimation Window:</strong> The relationship between the firm and the market (the <span class="math inline">\(\beta\)</span>) must be stable between the estimation and event windows.</li>
</ul></li>
</ul>
</section></section>
<section>
<section id="summary" class="title-slide slide level1 center">
<h1>Summary</h1>

</section>
<section id="what-did-we-do" class="slide level2">
<h2>What did we do?</h2>
<ul>
<li><strong>Introduced panel data</strong>:
<ul>
<li>Panel data tracks the same individuals (e.g., firms, people) over time. It highlighted its main advantage: the ability to control for unobserved, time-invariant factors (like firm culture or individual ability) that could otherwise cause omitted variable bias.</li>
</ul></li>
<li><strong>Explained the two main panel data models</strong>:
<ul>
<li>Fixed Effects (FE) and Random Effects (RE). The lecture described how the FE model controls for unobserved factors by using only “within-individual” variation, while the RE model assumes these factors are random and uncorrelated with the explanatory variables.</li>
</ul></li>
<li><strong>Introduced a method for choosing</strong>:
<ul>
<li>The Hausman test helps determine whether the unobserved individual effects are correlated with the regressors. A significant result suggests using the FE model to avoid bias, while a non-significant result allows for the more efficient RE model.</li>
</ul></li>
</ul>
</section>
<section id="what-did-we-do-cont." class="slide level2">
<h2>What did we do? (Cont.)</h2>
<ul>
<li><strong>Introduced an alternative method</strong>:
<ul>
<li>The First Difference (FD) estimator. The lecture explained that by differencing data over time, the FD model also removes fixed effects and is particularly useful and more efficient than FE when errors are highly serially correlated (e.g., follow a random walk).</li>
</ul></li>
<li><strong>Introduced event studies</strong>:
<ul>
<li>We detailed the “event study” methodology as a powerful application of panel data. It explained how event studies measure the impact of a specific event (like a policy change or merger) on an outcome by analyzing the periods before and after the event.</li>
</ul></li>
<li><strong>Contrasted two types of event studies</strong>:
<ul>
<li>We first showed the modern panel event study which requires a control group and uses firm and time fixed effects to isolate the event’s causal impact.</li>
<li>We then explained the classic finance approach used without a control group, which relies on calculating “abnormal returns” against a predicted “normal” outcome.</li>
</ul></li>
</ul>
</section></section>
<section id="the-end" class="title-slide slide level1 center">
<h1>The End</h1>

<div class="quarto-auto-generated-content">
<p><img src="logo.svg" class="slide-logo"></p>
<div class="footer footer-default">
<p>Empirical Economics: Lecture 5 - Panel Data</p>
</div>
</div>
</section>
    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="../../site_libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="../../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="../../site_libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="../../site_libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="../../site_libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="../../site_libs/revealjs/plugin/reveal-chalkboard/plugin.js"></script>
  <script src="../../site_libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="../../site_libs/revealjs/plugin/notes/notes.js"></script>
  <script src="../../site_libs/revealjs/plugin/search/search.js"></script>
  <script src="../../site_libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="../../site_libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': true,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleChalkboard(event)\"><kbd>b</kbd> Toggle Chalkboard</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleNotesCanvas(event)\"><kbd>c</kbd> Toggle Notes Canvas</a></li>\n<li class=\"slide-tool-item\" data-item=\"6\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.downloadDrawings(event)\"><kbd>d</kbd> Download Drawings</a></li>\n<li class=\"slide-tool-item\" data-item=\"7\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'chalkboard': {"buttons":false},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, RevealChalkboard, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    
    <script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        // dispatch for htmlwidgets
        function fireSlideEnter() {
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);
        }

        function fireSlideChanged(previousSlide, currentSlide) {
          fireSlideEnter();

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script>

    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const onCopySuccess = function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      }
      const getTextToCopy = function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
        text: getTextToCopy
      });
      clipboard.on('success', onCopySuccess);
      if (window.document.getElementById('quarto-embedded-source-code-modal')) {
        // For code content inside modals, clipBoardJS needs to be initialized with a container option
        // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
        const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
          text: getTextToCopy,
          container: window.document.getElementById('quarto-embedded-source-code-modal')
        });
        clipboardModal.on('success', onCopySuccess);
      }
        var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
        var mailtoRegex = new RegExp(/^mailto:/);
          var filterRegex = new RegExp('/' + window.location.host + '/');
        var isInternal = (href) => {
            return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
        }
        // Inspect non-navigation links and adorn them if external
     	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
        for (var i=0; i<links.length; i++) {
          const link = links[i];
          if (!isInternal(link.href)) {
            // undo the damage that might have been done by quarto-nav.js in the case of
            // links that we want to consider external
            if (link.dataset.originalHref !== undefined) {
              link.href = link.dataset.originalHref;
            }
          }
        }
      function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
        const config = {
          allowHTML: true,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start',
        };
        if (contentFn) {
          config.content = contentFn;
        }
        if (onTriggerFn) {
          config.onTrigger = onTriggerFn;
        }
        if (onUntriggerFn) {
          config.onUntrigger = onUntriggerFn;
        }
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note) {
            return note.innerHTML;
          } else {
            return "";
          }
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>